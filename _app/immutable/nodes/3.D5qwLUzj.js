import{l as ve,s as xe}from"../chunks/lang.Bi2J_BWb.js";import{l as pe,u as ae,b as Ye,d as ke,r as Oe,g as et,e as Ie}from"../chunks/db.BShgSK99.js";import{s as re,p as O,q as I,f as _,i as c,w as X,r as i,k as W,l as h,n as Y,e as y,b as A,d as C,j as V,x as R,y as Ze,Z as tt,t as le,T as st,h as ne,m as ce,_ as lt,B as nt,S as be,z as _e}from"../chunks/scheduler.DK9WmFTb.js";import{S as ie,i as fe,b as G,d as J,m as K,t as M,g as de,a as j,c as he,e as Q}from"../chunks/index.DcNqul0Z.js";import{C as ot,l as at,a as qe,L as Ue,b as rt,c as it,e as oe,u as Fe,g as ft,o as Re}from"../chunks/dialog.C5mKGYyV.js";/* empty css                       */import{h as Ge}from"../chunks/nav.B39lh7NY.js";import{S as ut,l as Ne}from"../chunks/stats.Zy988s_3.js";async function ct({parent:a,fetch:e}){const{db:s}=await a(),t=await ve(s),l=await pe(s,ae)??[],n=await pe(s,Ye);return{config:t,customLessons:l,allStatsLogs:n}}const It=Object.freeze(Object.defineProperty({__proto__:null,load:ct},Symbol.toStringTag,{value:"Module"}));function dt(a){let e,s,t,l,n,r,o;return{c(){e=O("svg"),s=O("path"),t=O("polygon"),l=O("polygon"),n=O("polygon"),r=O("path"),o=O("polygon"),this.h()},l(u){e=I(u,"svg",{viewBox:!0,xmlns:!0});var d=_(e);s=I(d,"path",{style:!0,d:!0}),_(s).forEach(c),t=I(d,"polygon",{style:!0,points:!0}),_(t).forEach(c),l=I(d,"polygon",{style:!0,points:!0}),_(l).forEach(c),n=I(d,"polygon",{style:!0,points:!0}),_(n).forEach(c),r=I(d,"path",{style:!0,d:!0}),_(r).forEach(c),o=I(d,"polygon",{style:!0,points:!0}),_(o).forEach(c),d.forEach(c),this.h()},h(){X(s,"stroke","rgb(0, 0, 0)"),X(s,"fill","rgb(216, 52, 27)"),i(s,"d","M 464.449 62.556 C 491.386 89.492 477.917 102.96 464.449 116.428 L 437.513 143.364 L 356.704 62.556 L 383.64 35.619 C 397.108 22.151 410.899 8.361 437.513 35.619 M 437.513 35.619 L 464.449 62.556"),X(t,"stroke","rgb(0, 0, 0)"),X(t,"fill","rgb(213, 213, 213)"),i(t,"points","356.704 62.556 329.768 89.492 410.577 170.301 437.513 143.365"),X(l,"stroke","rgb(0, 0, 0)"),X(l,"fill","rgb(255, 204, 117)"),i(l,"points","87.341 331.919 329.768 89.492 370.172 129.896 127.745 372.323"),X(n,"stroke","rgb(0, 0, 0)"),X(n,"fill","rgb(255, 157, 73)"),i(n,"points","410.577 170.301 370.172 129.896 127.745 372.323 168.15 412.728"),X(r,"stroke","rgb(0, 0, 0)"),X(r,"fill","rgb(242, 235, 217)"),i(r,"d","M 73.873 453.132 L 168.15 412.728 L 127.745 372.323 L 87.341 331.919 L 46.936 426.196 L 73.873 453.132 Z"),X(o,"stroke","rgb(0, 0, 0)"),X(o,"fill","rgb(155, 154, 163)"),i(o,"points","20 480.069 73.873 453.132 46.936 426.196"),i(e,"viewBox","0 0 500 500"),i(e,"xmlns","http://www.w3.org/2000/svg")},m(u,d){W(u,e,d),h(e,s),h(e,t),h(e,l),h(e,n),h(e,r),h(e,o)},p:Y,i:Y,o:Y,d(u){u&&c(e)}}}class ht extends ie{constructor(e){super(),fe(this,e,null,dt,re,{})}}function gt(a){let e,s;return{c(){e=O("svg"),s=O("path"),this.h()},l(t){e=I(t,"svg",{viewBox:!0,xmlns:!0});var l=_(e);s=I(l,"path",{transform:!0,d:!0}),_(s).forEach(c),l.forEach(c),this.h()},h(){i(s,"transform","matrix(1.1504559516906738, 0, 0, 1.1504559516906738, -452.35363769531614, -416.7264404296875)"),i(s,"d","M 581.412717025 394.487 L 639.587282975 394.487 L 644.254728479 441.107742158 A 143.421 143.421 0 0 1 685.19701336 458.06659183 L 721.463238651 428.401131273 L 762.598868727 469.536761349 L 732.93340817 505.80298664 A 143.421 143.421 0 0 1 749.892257842 546.745271521 L 796.513 551.412717025 L 796.513 609.587282975 L 749.892257842 614.254728479 A 143.421 143.421 0 0 1 732.93340817 655.19701336 L 762.598868727 691.463238651 L 721.463238651 732.598868727 L 685.19701336 702.93340817 A 143.421 143.421 0 0 1 644.254728479 719.892257842 L 639.587282975 766.513 L 581.412717025 766.513 L 576.745271521 719.892257842 A 143.421 143.421 0 0 1 535.80298664 702.93340817 L 499.536761349 732.598868727 L 458.401131273 691.463238651 L 488.06659183 655.19701336 A 143.421 143.421 0 0 1 471.107742158 614.254728479 L 424.487 609.587282975 L 424.487 551.412717025 L 471.107742158 546.745271521 A 143.421 143.421 0 0 1 488.06659183 505.80298664 L 458.401131273 469.536761349 L 499.536761349 428.401131273 L 535.80298664 458.06659183 A 143.421 143.421 0 0 1 576.745271521 441.107742158 Z M 610.5 517.047 A 63.453 63.453 0 0 0 610.5 643.953 A 63.453 63.453 0 0 0 610.5 517.047"),i(e,"viewBox","0 0 500 500"),i(e,"xmlns","http://www.w3.org/2000/svg")},m(t,l){W(t,e,l),h(e,s)},p:Y,i:Y,o:Y,d(t){t&&c(e)}}}class mt extends ie{constructor(e){super(),fe(this,e,null,gt,re,{})}}function _t(a){let e,s,t,l,n,r,o,u;return{c(){e=O("svg"),s=O("defs"),t=O("marker"),l=O("path"),n=O("marker"),r=O("path"),o=O("path"),u=O("path"),this.h()},l(d){e=I(d,"svg",{viewBox:!0,xmlns:!0});var f=_(e);s=I(f,"defs",{});var p=_(s);t=I(p,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerWidth:!0,markerHeight:!0,orient:!0});var $=_(t);l=I($,"path",{d:!0,transform:!0}),_(l).forEach(c),$.forEach(c),n=I(p,"marker",{id:!0,viewBox:!0,refX:!0,refY:!0,markerWidth:!0,markerHeight:!0,orient:!0});var m=_(n);r=I(m,"path",{d:!0,transform:!0}),_(r).forEach(c),m.forEach(c),p.forEach(c),o=I(f,"path",{class:!0,d:!0,transform:!0}),_(o).forEach(c),u=I(f,"path",{class:!0,d:!0,transform:!0}),_(u).forEach(c),f.forEach(c),this.h()},h(){i(l,"d","M 10 10 L 30 25 L 10 40"),i(l,"transform","rotate(8 20 25)"),i(t,"id","arrow"),i(t,"viewBox","0 0 50 50"),i(t,"refX","23"),i(t,"refY","27"),i(t,"markerWidth","7"),i(t,"markerHeight","7"),i(t,"orient","auto-start-reverse"),i(r,"d","M 10 10 L 30 25 L 10 40"),i(r,"transform","rotate(8 20 25)"),i(n,"id","arrow2"),i(n,"viewBox","0 0 50 50"),i(n,"refX","23"),i(n,"refY","27"),i(n,"markerWidth","7"),i(n,"markerHeight","7"),i(n,"orient","auto-start-reverse"),i(o,"class","reset-icon svelte-1ilr3ac"),i(o,"d","M 249.889 100 C 365.272 100 437.388 225 379.695 324.999 C 322.003 425 177.774 425 120.081 324.999 C 102.299 294.175 96.047 258.028 102.447 223.016"),i(o,"transform","matrix(0.6427876096865394, -0.766044443118978, 0.766044443118978, 0.6427876096865394, -102.20801320137937, 280.8142083581097)"),i(u,"class","reset-icon svelte-1ilr3ac"),i(u,"d","M 116.485 96.032 L 176.485 141.032 L 116.485 186.032"),i(u,"transform","matrix(-0.669131, 0.743145, -0.743145, -0.669131, 349.309934, 126.541308)"),i(e,"viewBox","0 0 500 500"),i(e,"xmlns","http://www.w3.org/2000/svg")},m(d,f){W(d,e,f),h(e,s),h(s,t),h(t,l),h(s,n),h(n,r),h(e,o),h(e,u)},p:Y,i:Y,o:Y,d(d){d&&c(e)}}}class vt extends ie{constructor(e){super(),fe(this,e,null,_t,re,{})}}function pt(a){let e,s;return{c(){e=O("svg"),s=O("polygon"),this.h()},l(t){e=I(t,"svg",{viewBox:!0,xmlns:!0});var l=_(e);s=I(l,"polygon",{points:!0}),_(s).forEach(c),l.forEach(c),this.h()},h(){i(s,"points","99.365 72.808 400 246.38 100 419.585"),i(e,"viewBox","0 0 500 500"),i(e,"xmlns","http://www.w3.org/2000/svg")},m(t,l){W(t,e,l),h(e,s)},p:Y,i:Y,o:Y,d(t){t&&c(e)}}}class bt extends ie{constructor(e){super(),fe(this,e,null,pt,re,{})}}function je(a){let e,s,t,l,n,r;return s=new ot({}),{c(){e=y("button"),G(s.$$.fragment),this.h()},l(o){e=C(o,"BUTTON",{class:!0,title:!0});var u=_(e);J(s.$$.fragment,u),u.forEach(c),this.h()},h(){i(e,"class","remove-btn icon svelte-j9zi48"),i(e,"title",t=a[0].lang.delete)},m(o,u){W(o,e,u),K(s,e,null),l=!0,n||(r=R(e,"click",a[12]),n=!0)},p(o,u){(!l||u&1&&t!==(t=o[0].lang.delete))&&i(e,"title",t)},i(o){l||(M(s.$$.fragment,o),l=!0)},o(o){j(s.$$.fragment,o),l=!1},d(o){o&&c(e),Q(s),n=!1,r()}}}function Ae(a){let e,s,t,l,n,r;return s=new ht({}),{c(){e=y("button"),G(s.$$.fragment),this.h()},l(o){e=C(o,"BUTTON",{class:!0,title:!0});var u=_(e);J(s.$$.fragment,u),u.forEach(c),this.h()},h(){i(e,"class","edit-btn icon svelte-j9zi48"),i(e,"title",t=a[0].lang.edit)},m(o,u){W(o,e,u),K(s,e,null),l=!0,n||(r=R(e,"click",a[14]),n=!0)},p(o,u){(!l||u&1&&t!==(t=o[0].lang.edit))&&i(e,"title",t)},i(o){l||(M(s.$$.fragment,o),l=!0)},o(o){j(s.$$.fragment,o),l=!1},d(o){o&&c(e),Q(s),n=!1,r()}}}function wt(a){let e,s,t,l,n,r,o,u,d,f,p,$,m,g,S,H,U,N,b,z,Z,T=a[2]&&je(a);l=new vt({}),d=new ut({}),m=new mt({});let k=a[2]&&Ae(a);return N=new bt({}),{c(){e=y("div"),T&&T.c(),s=A(),t=y("button"),G(l.$$.fragment),o=A(),u=y("button"),G(d.$$.fragment),p=A(),$=y("button"),G(m.$$.fragment),S=A(),k&&k.c(),H=A(),U=y("button"),G(N.$$.fragment),this.h()},l(E){e=C(E,"DIV",{class:!0});var D=_(e);T&&T.l(D),s=V(D),t=C(D,"BUTTON",{class:!0,title:!0});var q=_(t);J(l.$$.fragment,q),q.forEach(c),o=V(D),u=C(D,"BUTTON",{class:!0,title:!0});var F=_(u);J(d.$$.fragment,F),F.forEach(c),p=V(D),$=C(D,"BUTTON",{class:!0,title:!0});var x=_($);J(m.$$.fragment,x),x.forEach(c),S=V(D),k&&k.l(D),H=V(D),U=C(D,"BUTTON",{class:!0});var P=_(U);J(N.$$.fragment,P),P.forEach(c),D.forEach(c),this.h()},h(){i(t,"class","reset-btn icon svelte-j9zi48"),t.disabled=n=a[1]===void 0,i(t,"title",r=a[0].lang.resetLessonStats),u.disabled=f=a[1]===void 0,i(u,"class","stats-btn icon svelte-j9zi48"),i(u,"title",a[3]),i($,"class","settings-btn icon svelte-j9zi48"),i($,"title",g=a[0].lang.openLessonConfigDialog),i(U,"class","start-btn icon svelte-j9zi48"),i(e,"class","buttons svelte-j9zi48")},m(E,D){W(E,e,D),T&&T.m(e,null),h(e,s),h(e,t),K(l,t,null),h(e,o),h(e,u),K(d,u,null),h(e,p),h(e,$),K(m,$,null),h(e,S),k&&k.m(e,null),h(e,H),h(e,U),K(N,U,null),b=!0,z||(Z=[R(t,"click",a[8]),R(u,"click",a[7]),R($,"click",a[13]),R(U,"click",a[9])],z=!0)},p(E,[D]){E[2]?T?(T.p(E,D),D&4&&M(T,1)):(T=je(E),T.c(),M(T,1),T.m(e,s)):T&&(de(),j(T,1,1,()=>{T=null}),he()),(!b||D&2&&n!==(n=E[1]===void 0))&&(t.disabled=n),(!b||D&1&&r!==(r=E[0].lang.resetLessonStats))&&i(t,"title",r),(!b||D&2&&f!==(f=E[1]===void 0))&&(u.disabled=f),(!b||D&1&&g!==(g=E[0].lang.openLessonConfigDialog))&&i($,"title",g),E[2]?k?(k.p(E,D),D&4&&M(k,1)):(k=Ae(E),k.c(),M(k,1),k.m(e,H)):k&&(de(),j(k,1,1,()=>{k=null}),he())},i(E){b||(M(T),M(l.$$.fragment,E),M(d.$$.fragment,E),M(m.$$.fragment,E),M(k),M(N.$$.fragment,E),b=!0)},o(E){j(T),j(l.$$.fragment,E),j(d.$$.fragment,E),j(m.$$.fragment,E),j(k),j(N.$$.fragment,E),b=!1},d(E){E&&c(e),T&&T.d(),Q(l),Q(d),Q(m),k&&k.d(),Q(N),z=!1,Ze(Z)}}}function Lt(a,e,s){let{config:t}=e,{lesson:l}=e,{db:n}=e,{custom:r}=e,{stats:o}=e;const u=tt();let d=o?t.lang.openUserStatsDialog:t.lang.statsLogNoStats;async function f(){if(!l.id.startsWith("user_"))return;const b=await at(t,n,l.id),z=await qe(t,n,b);z!==void 0&&(ke(n,ae,z),u("updated",{edited:l.id}))}async function p(){if(!l.id.startsWith("user_")||!window.confirm(t.lang.lessonDialogConfirmDelete.replace("%s",l.name)))return;const b=await ve(n);b.lastLesson===l.id&&(b.lastLesson=null,b.saveUserConfig(n)),s(0,t=b),Oe(n,ae,l.id),u("updated",{deleted:l.id})}async function $(){const b=await Ue.load(l.id,t,n);let z=await et(n,Ie,l.id),Z,T={};z!==void 0&&({id:Z,...T}=z);const k=await rt(t,n,b,T,void 0);if(k!==void 0){let E=k[1];Ue.saveLessonOptions(l.id,E,n),ke(n,Ie,{lesson_id:l.id,...k[1]})}}async function m(){o&&it(t,n,l.name,o)}async function g(){o!==void 0&&window.confirm(t.lang.resetLessonStatsPrompt.replace("%s",l.name))&&(await Oe(n,Ye,o.lesson_id),s(1,o=void 0))}async function S(){if(window.confirm(t.lang.lessonDialogStartLesson.replace("%s",l.name))){const b=await ve(n);b.lastLesson=l.id,b.saveUserConfig(n),Ge()}}const H=()=>p(),U=()=>$(),N=()=>f();return a.$$set=b=>{"config"in b&&s(0,t=b.config),"lesson"in b&&s(10,l=b.lesson),"db"in b&&s(11,n=b.db),"custom"in b&&s(2,r=b.custom),"stats"in b&&s(1,o=b.stats)},[t,o,r,d,f,p,$,m,g,S,l,n,H,U,N]}class Je extends ie{constructor(e){super(),fe(this,e,Lt,wt,re,{config:0,lesson:10,db:11,custom:2,stats:1})}}const{Map:Ke,document:Le}=ft;function Ve(a,e,s){const t=a.slice();return t[12]=e[s],t}function ze(a,e,s){const t=a.slice();return t[15]=e[s],t}function He(a,e,s){const t=a.slice();return t[18]=e[s],t}function We(a,e){let s,t,l,n,r=e[18].name+"",o,u;return t=new Je({props:{config:e[0],lesson:e[18],db:e[2],custom:!0,stats:e[3].get(e[18].id)}}),t.$on("updated",e[5]),{key:a,first:null,c(){s=y("div"),G(t.$$.fragment),l=A(),n=y("div"),o=le(r),this.h()},l(d){s=C(d,"DIV",{class:!0});var f=_(s);J(t.$$.fragment,f),l=V(f),n=C(f,"DIV",{class:!0});var p=_(n);o=ne(p,r),p.forEach(c),f.forEach(c),this.h()},h(){i(n,"class","svelte-1540lml"),be(n,"highlight",e[18].id===e[0].lastLesson),i(s,"class","custom-lesson svelte-1540lml"),this.first=s},m(d,f){W(d,s,f),K(t,s,null),h(s,l),h(s,n),h(n,o),u=!0},p(d,f){e=d;const p={};f&1&&(p.config=e[0]),f&2&&(p.lesson=e[18]),f&2&&(p.stats=e[3].get(e[18].id)),t.$set(p),(!u||f&2)&&r!==(r=e[18].name+"")&&ce(o,r),(!u||f&3)&&be(n,"highlight",e[18].id===e[0].lastLesson)},i(d){u||(M(t.$$.fragment,d),u=!0)},o(d){j(t.$$.fragment,d),u=!1},d(d){d&&c(s),Q(t)}}}function kt(a){var d;let e,s,t,l,n=((d=a[15])==null?void 0:d.name)+"",r,o,u;return s=new Je({props:{config:a[0],lesson:a[15],db:a[2],custom:!1,stats:a[3].get(a[15].id)}}),s.$on("updated",a[5]),{c(){e=y("div"),G(s.$$.fragment),t=A(),l=y("div"),r=le(n),o=A(),this.h()},l(f){e=C(f,"DIV",{class:!0});var p=_(e);J(s.$$.fragment,p),t=V(p),l=C(p,"DIV",{class:!0});var $=_(l);r=ne($,n),$.forEach(c),o=V(p),p.forEach(c),this.h()},h(){var f;i(l,"class","svelte-1540lml"),be(l,"highlight",((f=a[15])==null?void 0:f.id)===a[0].lastLesson),i(e,"class","stock-lesson svelte-1540lml")},m(f,p){W(f,e,p),K(s,e,null),h(e,t),h(e,l),h(l,r),h(e,o),u=!0},p(f,p){var m;const $={};p&1&&($.config=f[0]),s.$set($),(!u||p&1)&&be(l,"highlight",((m=f[15])==null?void 0:m.id)===f[0].lastLesson)},i(f){u||(M(s.$$.fragment,f),u=!0)},o(f){j(s.$$.fragment,f),u=!1},d(f){f&&c(e),Q(s)}}}function Pe(a,e){let s,t,l,n=e[15]&&kt(e);return{key:a,first:null,c(){s=_e(),n&&n.c(),t=_e(),this.h()},l(r){s=_e(),n&&n.l(r),t=_e(),this.h()},h(){this.first=s},m(r,o){W(r,s,o),n&&n.m(r,o),W(r,t,o),l=!0},p(r,o){e=r,e[15]&&n.p(e,o)},i(r){l||(M(n),l=!0)},o(r){j(n),l=!1},d(r){r&&(c(s),c(t)),n&&n.d(r)}}}function Xe(a){let e,s,t=a[12].name+"",l,n,r,o=[],u=new Ke,d,f,p=oe(a[12].lessons.map(a[8]).filter(a[9]));const $=m=>m[15].id;for(let m=0;m<p.length;m+=1){let g=ze(a,p,m),S=$(g);u.set(S,o[m]=Pe(S,g))}return{c(){e=y("fieldset"),s=y("legend"),l=le(t),n=A(),r=y("div");for(let m=0;m<o.length;m+=1)o[m].c();d=A(),this.h()},l(m){e=C(m,"FIELDSET",{class:!0});var g=_(e);s=C(g,"LEGEND",{class:!0});var S=_(s);l=ne(S,t),S.forEach(c),n=V(g),r=C(g,"DIV",{class:!0});var H=_(r);for(let U=0;U<o.length;U+=1)o[U].l(H);H.forEach(c),d=V(g),g.forEach(c),this.h()},h(){i(s,"class","subgrid-title"),i(r,"class","subgrid-content"),i(e,"class","subgrid svelte-1540lml")},m(m,g){W(m,e,g),h(e,s),h(s,l),h(e,n),h(e,r);for(let S=0;S<o.length;S+=1)o[S]&&o[S].m(r,null);h(e,d),f=!0},p(m,g){g&45&&(p=oe(m[12].lessons.map(m[8]).filter(m[9])),de(),o=Fe(o,g,$,1,m,p,u,r,Re,Pe,null,ze),he())},i(m){if(!f){for(let g=0;g<p.length;g+=1)M(o[g]);f=!0}},o(m){for(let g=0;g<o.length;g+=1)j(o[g]);f=!1},d(m){m&&c(e);for(let g=0;g<o.length;g+=1)o[g].d()}}}function Et(a){let e,s,t,l,n,r=a[0].lang.lessonDialogCustomTitle+"",o,u,d,f=[],p=new Ke,$,m,g,S=a[0].lang.lessonDialogNewLesson+"",H,U,N,b,z=a[0].lang.lessonDialogStockTitle+"",Z,T,k,E,D,q,F=a[0].lang.back+"",x,P,we,Ee;Le.title=e=a[0].lang.manageSettingsTitle;let ue=oe(a[1]);const $e=v=>v[18].id;for(let v=0;v<ue.length;v+=1){let w=He(a,ue,v),L=$e(w);p.set(L,f[v]=We(L,w))}let ee=oe(Ne.values()),B=[];for(let v=0;v<ee.length;v+=1)B[v]=Xe(Ve(a,ee,v));const Qe=v=>j(B[v],1,1,()=>{B[v]=null});return{c(){s=A(),t=y("div"),l=y("section"),n=y("h1"),o=le(r),u=A(),d=y("div");for(let v=0;v<f.length;v+=1)f[v].c();$=A(),m=y("div"),g=y("button"),H=le(S),U=A(),N=y("section"),b=y("h1"),Z=le(z),T=A(),k=y("div");for(let v=0;v<B.length;v+=1)B[v].c();E=A(),D=y("footer"),q=y("button"),x=le(F),this.h()},l(v){st("svelte-f7jewk",Le.head).forEach(c),s=V(v),t=C(v,"DIV",{class:!0});var L=_(t);l=C(L,"SECTION",{});var te=_(l);n=C(te,"H1",{});var De=_(n);o=ne(De,r),De.forEach(c),u=V(te),d=C(te,"DIV",{class:!0});var ge=_(d);for(let se=0;se<f.length;se+=1)f[se].l(ge);$=V(ge),m=C(ge,"DIV",{class:!0});var Se=_(m);g=C(Se,"BUTTON",{});var Te=_(g);H=ne(Te,S),Te.forEach(c),Se.forEach(c),ge.forEach(c),te.forEach(c),U=V(L),N=C(L,"SECTION",{});var me=_(N);b=C(me,"H1",{});var ye=_(b);Z=ne(ye,z),ye.forEach(c),T=V(me),k=C(me,"DIV",{class:!0});var Ce=_(k);for(let se=0;se<B.length;se+=1)B[se].l(Ce);Ce.forEach(c),me.forEach(c),E=V(L),D=C(L,"FOOTER",{});var Be=_(D);q=C(Be,"BUTTON",{});var Me=_(q);x=ne(Me,F),Me.forEach(c),Be.forEach(c),L.forEach(c),this.h()},h(){i(m,"class","new-lesson svelte-1540lml"),i(d,"class","custom subgrids svelte-1540lml"),i(k,"class","subgrids"),i(t,"class","manage svelte-1540lml")},m(v,w){W(v,s,w),W(v,t,w),h(t,l),h(l,n),h(n,o),h(l,u),h(l,d);for(let L=0;L<f.length;L+=1)f[L]&&f[L].m(d,null);h(d,$),h(d,m),h(m,g),h(g,H),h(t,U),h(t,N),h(N,b),h(b,Z),h(N,T),h(N,k);for(let L=0;L<B.length;L+=1)B[L]&&B[L].m(k,null);h(t,E),h(t,D),h(D,q),h(q,x),P=!0,we||(Ee=[R(g,"click",a[4]),R(q,"click",a[6])],we=!0)},p(v,[w]){if((!P||w&1)&&e!==(e=v[0].lang.manageSettingsTitle)&&(Le.title=e),(!P||w&1)&&r!==(r=v[0].lang.lessonDialogCustomTitle+"")&&ce(o,r),w&47&&(ue=oe(v[1]),de(),f=Fe(f,w,$e,1,v,ue,p,d,Re,We,$,He),he()),(!P||w&1)&&S!==(S=v[0].lang.lessonDialogNewLesson+"")&&ce(H,S),(!P||w&1)&&z!==(z=v[0].lang.lessonDialogStockTitle+"")&&ce(Z,z),w&45){ee=oe(Ne.values());let L;for(L=0;L<ee.length;L+=1){const te=Ve(v,ee,L);B[L]?(B[L].p(te,w),M(B[L],1)):(B[L]=Xe(te),B[L].c(),M(B[L],1),B[L].m(k,null))}for(de(),L=ee.length;L<B.length;L+=1)Qe(L);he()}(!P||w&1)&&F!==(F=v[0].lang.back+"")&&ce(x,F)},i(v){if(!P){for(let w=0;w<ue.length;w+=1)M(f[w]);for(let w=0;w<ee.length;w+=1)M(B[w]);P=!0}},o(v){for(let w=0;w<f.length;w+=1)j(f[w]);B=B.filter(Boolean);for(let w=0;w<B.length;w+=1)j(B[w]);P=!1},d(v){v&&(c(s),c(t));for(let w=0;w<f.length;w+=1)f[w].d();lt(B,v),we=!1,Ze(Ee)}}}function $t(a,e,s){let{data:t}=e,l=t.db,n=t.config,r=t.customLessons,o=t.allStatsLogs;const u=o?new Map(o.map(g=>[g.lesson_id,g])):new Map;nt(()=>{document.documentElement.lang=n.lang.lang,document.documentElement.dir=n.lang.textDirection});async function d(){let g=await qe(n,l,null);if(g===void 0)return;const S=await ve(l);g.id="user_"+S.nextCustomId.toString(),await ke(l,ae,g),S.nextCustomId+=1,await S.saveUserConfig(l),s(1,r=await pe(l,ae)??[]),s(0,n=S)}async function f(){s(1,r=await pe(l,ae)??[])}function p(){Ge()}const $=g=>xe.get(g),m=g=>g!==void 0;return a.$$set=g=>{"data"in g&&s(7,t=g.data)},[n,r,l,u,d,f,p,t,$,m]}class Ut extends ie{constructor(e){super(),fe(this,e,$t,Et,re,{data:7})}}export{Ut as component,It as universal};
