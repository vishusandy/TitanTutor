var ie=Object.defineProperty;var ue=(t,e,r)=>e in t?ie(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var s=(t,e,r)=>(ue(t,typeof e!="symbol"?e+"":e,r),r);import{b as T}from"./paths.DAkDvWyj.js";import{A as c,C as K,g as ce,f as he,h as J,i as F,d as de}from"./db.BShgSK99.js";import{B as le}from"./bst.CZJClfsK.js";const B=5;class G{constructor(){s(this,"duration",0);s(this,"keystrokes",0);s(this,"wordErrors",0);s(this,"backspaces",0);s(this,"words",0);s(this,"chars",0);s(this,"uncorrectedErrors",0);s(this,"correctedErrors",0)}getGrossWpm(){return this.keystrokes/B/(this.duration/6e4)}getNetWpm(){return(this.keystrokes/B-this.uncorrectedErrors)/this.duration/6e4}getAccuracy(){return this.chars/this.keystrokes}}class gt extends G{constructor(r,n){super();s(this,"started");s(this,"mode");s(this,"id");this.mode=n,this.id=r}add(r){this.words+=1,this.keystrokes+=r.keystrokes,this.correctedErrors+=r.correctedErrors,this.uncorrectedErrors+=r.uncorrectedErrors,this.backspaces+=r.backspaces,this.chars+=r.wordChars.length,this.wordErrors+=r.wordAttempts}baseStats(){return{duration:this.duration,keystrokes:this.keystrokes,wordErrors:this.wordErrors,backspaces:this.backspaces,words:this.words,chars:this.chars,uncorrectedErrors:this.uncorrectedErrors,correctedErrors:this.correctedErrors}}resetWord(r){}pause(){this.started!==void 0&&(this.duration+=performance.now()-this.started,this.started=void 0)}resume(){this.started===void 0&&(this.started=performance.now())}reset(){this.started=void 0,this.duration=0,this.keystrokes=0,this.wordErrors=0,this.backspaces=0,this.words=0,this.chars=0,this.uncorrectedErrors=0,this.correctedErrors=0}}class y extends G{constructor(){super(...arguments);s(this,"sessions",0)}static deserialize(r){const n=new y;for(const a in r)n.hasOwnProperty(a)&&(n[a]=r[a]);return n}reset(){this.sessions=0,this.duration=0,this.keystrokes=0,this.wordErrors=0,this.backspaces=0,this.words=0,this.chars=0,this.uncorrectedErrors=0,this.correctedErrors=0}add(r){this.duration+=r.duration,this.words+=r.words,this.keystrokes+=r.keystrokes,this.correctedErrors+=r.correctedErrors,this.uncorrectedErrors+=r.uncorrectedErrors,this.backspaces+=r.backspaces,this.chars+=r.chars,this.wordErrors+=r.wordErrors,this.sessions+=1}}const fe=[.5,2],pe=[0,2],me=[0,1];function M(t,e,r){return Math.min(r,Math.max(e,t))}class D{constructor(e,r,n,a,o,i){s(this,"rate",1);s(this,"pitch",1);s(this,"volume",1);s(this,"voice");s(this,"mute");s(this,"queueSize",1);this.rate=M(r,...fe),this.pitch=M(n,...pe),this.volume=M(a,...me),this.voice=e,this.mute=o,this.queueSize=i}play(e){if(this.mute)return;let r;Array.isArray(e)?e.length>this.queueSize?r=e.slice(0,this.queueSize).join(" "):r=e.join(" "):r=e;const n=new SpeechSynthesisUtterance(r);n.voice=this.voice,n.rate=this.rate,n.pitch=this.pitch,speechSynthesis.speak(n)}static serialize(e){return e===void 0?"":JSON.stringify({rate:e.rate,pitch:e.pitch,volume:e.volume,voice:e.voice.name,mute:e.mute,queueSize:e.queueSize})}static deserialize(e){if(e==="")return;const r=JSON.parse(e),n=speechSynthesis.getVoices().find(a=>a.name===r.voice);if(n!==void 0)return new D(n,r.rate,r.pitch,r.volume,r.mute,r.queueSize)}}function St(){let t=speechSynthesis.getVoices().sort(ge),e=new Map,r;for(const n of t){const a=ve(n.name);(r=e.get(a))?r.push(n):e.set(a,[n])}return e}function wt(t,e){return t===e?"Default":Se(t)}function ve(t){const e=t.indexOf("+");return e!==-1?t.substring(0,e):t}function ge(t,e){return t.name.toUpperCase().localeCompare(e.name.toUpperCase())}function Se(t){const e=t.indexOf("+");return e!==-1?t.substring(e+1):t}const j="en",_t=[{name:"English - US",path:"en-US"}],we=["English (America)","Google US English"],_e="en-US",ke=new Map([["en-US",["English (America)","Google US English"]],["en",["English (America)","Google US English"]]]),be=new Map([["en-US","en-US"],["en","en-US"]]),ye=new Map([["en-US","qwerty_en-US_1"]]),kt={random:"inherit",until:"inherit",checkMode:"inherit",backspace:"inherit",wordBatchSize:"inherit",minQueue:"inherit",spaceOptional:"inherit",adaptive:"inherit",caseSensitive:"inherit"},U={random:"enabled",until:"enabled",checkMode:"enabled",backspace:"enabled",wordBatchSize:"enabled",minQueue:"enabled",spaceOptional:"enabled",adaptive:"enabled",caseSensitive:"enabled"};function bt(t,e){let r,n={...t};for(r in U)t[r]!==e[r]&&(t[r]==="enabled"?n[r]=e[r]:e[r]!=="enabled"&&t[r]!==e[r]&&console.warn(`merge error: cannot merge two overridden values for field ${r}`,t[r],e[r]));return n}class ${static load(e,r=fetch){if(e==="no_map")return new Promise(a=>a(Q));const n=new Request(`${T}/data/kbmaps/${e}.json`);return r(n).then(a=>a.ok?a.json():Q).then(a=>new De(e,a.name,new Map(a.keys)))}}const X=new Set(["Process","Delete","Enter","ArrowDown","ArrowUp","ArrowLeft","ArrowRight","Home","End","PageUp","PageDown","Escape","Insert","Shift"]),Q={getId(){return"no_map"},getName(t){return""},get(t){return t}};class De{constructor(e,r,n){s(this,"id");s(this,"name");s(this,"map");this.id=e,this.map=n,this.name=r}getId(){return this.id}getName(e){return this.name}get(e){return this.map.get(e)}}function Z(t,e,r,n){return t.inputType==="deleteContentBackward"&&e.backspace===!0?(t.preventDefault(),r.addBackspace(e.backspace)?c.Refresh:c.None):t.inputType!=="insertText"?(t.preventDefault(),c.None):Ue(t,e,r,n)}function Ue(t,e,r,n){if(!t.data)return c.None;let a=c.None;for(const o of[...t.data]){const i=e.remap.get(o);if(i===" "){const u=q({key:" ",preventDefault:()=>{}},e,r,n);a|=u,u===c.None&&(r.addChar(i),a|=c.CharAdded|c.Refresh)}else i!==void 0&&(r.addChar(e.caseSensitive?i:i.toLowerCase()),a|=c.CharAdded|c.Refresh)}return a!=c.None&&(r.addKeystroke(),t.preventDefault()),a}function q(t,e,r,n){if(t.key==="Backspace")return r.addBackspace(e.backspace),t.preventDefault(),c.Refresh;if(t.key==="Alt"||t.key==="Shift"||t.key==="Control")return t.preventDefault(),c.None;switch(e.checkMode){case K.Char:return Me(t,e,r);case K.WordRepeat:return Ne(t,r,n)}}function Ne(t,e,r){return t.key===" "||t.key==="Enter"?e.completed()?(t.preventDefault(),c.NextWord|c.Refresh):(r.resetWord(e),e.reset(e.getWord()),t.preventDefault(),c.WordReset|c.Refresh):(X.has(t.key)&&t.preventDefault(),c.None)}function Me(t,e,r){return X.has(t.key)?c.None:r.atEnd()?t.key===" "?(t.preventDefault(),c.NextWord|c.Refresh):e.spaceOptional?c.NextWord|c.Refresh:(r.uncorrectedErrors+=1,t.preventDefault(),c.MissedSpace|c.NextWord|c.Refresh):c.None}class Ee{constructor(e,r,n,a){s(this,"words");s(this,"pos");s(this,"id");s(this,"name");s(this,"lang");if(e.length===0)throw new Error("Invalid word list: the list must contain at least one element");this.pos=0,this.words=e,this.id=r,this.name=n,this.lang=a}[Symbol.iterator](){return this}next(){return this.pos>=this.words.length&&(this.pos=0),{done:!1,value:this.words[this.pos++]}}toJSON(){return JSON.stringify(this.storable())}getChild(){}getName(e){return this.name}language(){return this.lang}baseLesson(){return this}batch(e){let r=[];for(let n=0,a=this.pos;n<e;n++,a=a+1%this.words.length)r.push(this.words[a]);return this.pos+=e,r}overrides(){return U}handleInput(e,r,n,a){return Z(e,r,n,a)}handleKeydown(e,r,n,a){return q(e,r,n,a)}}const _="chars",k="wordlist",yt="userwordlist",Dt="adaptive",Ut="until",Nt="random";class h extends Ee{static getTypeId(){return k}constructor(e,r,n,a){super(e,r,n,a)}getType(){return k}storable(){return{type:k,id:this.id,name:this.name,lang:this.lang,filename:this.id}}static async fromStorable(e,r,n=fetch){const a=new Request(`${T}/data/words/${e.filename}`);return n(a).then(o=>o.json()).then(o=>new h(o,e.id,e.name,e.lang))}static newStorable(e,r,n,a){return{type:k,id:e,filename:a,name:r,lang:n}}}function Y(t,e){for(var r=[],n=0;n!=e;++n)r.push(t.unsafeNext());return r}function Le(t,e){var r=t.clone(),n=Y(r,e);return[n,r]}function ee(t,e){for(var r=0;r!=e;++r)t.unsafeNext()}function Oe(t,e){var r=t.clone();return ee(r,e),r}var xe=214013,Ce=2531011,Re=4294967295,Ae=(1<<31)-1,E=function(t){return t*xe+Ce&Re},L=function(t){return(t&Ae)>>16},Te=function(){function t(e){this.seed=e}return t.prototype.clone=function(){return new t(this.seed)},t.prototype.next=function(){var e=new t(this.seed),r=e.unsafeNext();return[r,e]},t.prototype.unsafeNext=function(){var e=E(this.seed),r=L(e),n=E(e),a=L(n);this.seed=E(n);var o=L(this.seed),i=o+(a+(r<<15)<<15);return i|0},t}(),je=function(t){return new Te(t)},qe=function(){function t(e,r){this.states=e,this.index=r}return t.twist=function(e){for(var r=e.slice(),n=0;n!==t.N-t.M;++n){var a=(r[n]&t.MASK_UPPER)+(r[n+1]&t.MASK_LOWER);r[n]=r[n+t.M]^a>>>1^-(a&1)&t.A}for(var n=t.N-t.M;n!==t.N-1;++n){var o=(r[n]&t.MASK_UPPER)+(r[n+1]&t.MASK_LOWER);r[n]=r[n+t.M-t.N]^o>>>1^-(o&1)&t.A}var i=(r[t.N-1]&t.MASK_UPPER)+(r[0]&t.MASK_LOWER);return r[t.N-1]=r[t.M-1]^i>>>1^-(i&1)&t.A,r},t.seeded=function(e){var r=Array(t.N);r[0]=e;for(var n=1;n!==t.N;++n){var a=r[n-1]^r[n-1]>>>30;r[n]=Math.imul(t.F,a)+n|0}return r},t.from=function(e){return new t(t.twist(t.seeded(e)),0)},t.prototype.clone=function(){return new t(this.states,this.index)},t.prototype.next=function(){var e=new t(this.states,this.index),r=e.unsafeNext();return[r,e]},t.prototype.unsafeNext=function(){var e=this.states[this.index];return e^=this.states[this.index]>>>t.U,e^=e<<t.S&t.B,e^=e<<t.T&t.C,e^=e>>>t.L,++this.index>=t.N&&(this.states=t.twist(this.states),this.index=0),e},t.N=624,t.M=397,t.R=31,t.A=2567483615,t.F=1812433253,t.U=11,t.S=7,t.B=2636928640,t.T=15,t.C=4022730752,t.L=18,t.MASK_LOWER=Math.pow(2,t.R)-1,t.MASK_UPPER=Math.pow(2,t.R),t}();function Pe(t){return qe.from(t)}var We=function(){function t(e,r,n,a){this.s01=e,this.s00=r,this.s11=n,this.s10=a}return t.prototype.clone=function(){return new t(this.s01,this.s00,this.s11,this.s10)},t.prototype.next=function(){var e=new t(this.s01,this.s00,this.s11,this.s10),r=e.unsafeNext();return[r,e]},t.prototype.unsafeNext=function(){var e=this.s00^this.s00<<23,r=this.s01^(this.s01<<23|this.s00>>>9),n=e^this.s10^(e>>>18|r<<14)^(this.s10>>>5|this.s11<<27),a=r^this.s11^r>>>18^this.s11>>>5,o=this.s00+this.s10|0;return this.s01=this.s11,this.s00=this.s10,this.s11=a,this.s10=n,o},t.prototype.jump=function(){var e=new t(this.s01,this.s00,this.s11,this.s10);return e.unsafeJump(),e},t.prototype.unsafeJump=function(){for(var e=0,r=0,n=0,a=0,o=[1667051007,2321340297,1548169110,304075285],i=0;i!==4;++i)for(var u=1;u;u<<=1)o[i]&u&&(e^=this.s01,r^=this.s00,n^=this.s11,a^=this.s10),this.unsafeNext();this.s01=e,this.s00=r,this.s11=n,this.s10=a},t}(),ze=function(t){return new We(-1,~t,t|0,0)},Ie=function(){function t(e,r,n,a){this.s01=e,this.s00=r,this.s11=n,this.s10=a}return t.prototype.clone=function(){return new t(this.s01,this.s00,this.s11,this.s10)},t.prototype.next=function(){var e=new t(this.s01,this.s00,this.s11,this.s10),r=e.unsafeNext();return[r,e]},t.prototype.unsafeNext=function(){var e=this.s00+this.s10|0,r=this.s10^this.s00,n=this.s11^this.s01,a=this.s00,o=this.s01;return this.s00=a<<24^o>>>8^r^r<<16,this.s01=o<<24^a>>>8^n^(n<<16|r>>>16),this.s10=n<<5^r>>>27,this.s11=r<<5^n>>>27,e},t.prototype.jump=function(){var e=new t(this.s01,this.s00,this.s11,this.s10);return e.unsafeJump(),e},t.prototype.unsafeJump=function(){for(var e=0,r=0,n=0,a=0,o=[3639956645,3750757012,1261568508,386426335],i=0;i!==4;++i)for(var u=1;u;u<<=1)o[i]&u&&(e^=this.s01,r^=this.s00,n^=this.s11,a^=this.s10),this.unsafeNext();this.s01=e,this.s00=r,this.s11=n,this.s10=a},t}(),Ke=function(t){return new Ie(-1,~t,t|0,0)};function te(t,e){if(t.sign!==e.sign)return P(t,{sign:-e.sign,data:e.data});for(var r=[],n=0,a=t.data,o=e.data,i=a.length-1,u=o.length-1;i>=0||u>=0;--i,--u){var d=i>=0?a[i]:0,l=u>=0?o[u]:0,f=d+l+n;r.push(f>>>0),n=~~(f/4294967296)}return n!==0&&r.push(n),{sign:t.sign,data:r.reverse()}}function Be(t){t.sign=1;for(var e=t.data,r=e.length-1;r>=0;--r)if(e[r]===4294967295)e[r]=0;else return e[r]+=1,t;return e.unshift(1),t}function Qe(t,e){for(var r=Math.max(t.length,e.length),n=0;n<r;++n){var a=n+t.length-r,o=n+e.length-r,i=a>=0?t[a]:0,u=o>=0?e[o]:0;if(i<u)return!0;if(i>u)return!1}return!1}function P(t,e){if(t.sign!==e.sign)return te(t,{sign:-e.sign,data:e.data});var r=t.data,n=e.data;if(Qe(r,n)){var a=P(e,t);return a.sign=-a.sign,a}for(var o=[],i=0,u=r.length-1,d=n.length-1;u>=0||d>=0;--u,--d){var l=u>=0?r[u]:0,f=d>=0?n[d]:0,p=l-f-i;o.push(p>>>0),i=p<0?1:0}return{sign:t.sign,data:o.reverse()}}function V(t){for(var e=t.data,r=0;r!==e.length&&e[r]===0;++r);return r===e.length?(t.sign=1,t.data=[0],t):(e.splice(0,r),t)}function O(t,e){if(e<0){var r=-e;t.sign=-1,t.data[0]=~~(r/4294967296),t.data[1]=r>>>0}else t.sign=1,t.data[0]=~~(e/4294967296),t.data[1]=e>>>0;return t}function Ve(t,e,r){var n=e.data[1],a=e.data[0],o=e.sign,i=r.data[1],u=r.data[0],d=r.sign;if(t.sign=1,o===1&&d===-1){var l=n+i,f=a+u+(l>4294967295?1:0);return t.data[0]=f>>>0,t.data[1]=l>>>0,t}var p=n,S=a,W=i,z=u;o===-1&&(p=i,S=u,W=n,z=a);var I=0,w=p-W;return w<0&&(I=1,w=w>>>0),t.data[0]=S-z-I,t.data[1]=w,t}function re(t,e){for(var r=t>2?~~(4294967296/t)*t:4294967296,n=e.unsafeNext()+2147483648;n>=r;)n=e.unsafeNext()+2147483648;return n%t}function se(t,e,r){for(var n=e.length;;){for(var a=0;a!==n;++a){var o=a===0?e[0]+1:4294967296,i=re(o,r);t[a]=i}for(var a=0;a!==n;++a){var u=t[a],d=e[a];if(u<d)return t;if(u>d)break}}}function C(t,e,r){var n=V(Be(P(e,t))),a=n.data.slice(0),o=se(a,n.data,r);return V(te({sign:1,data:o},t))}function He(t,e,r){if(r!=null){var n=r.clone();return[C(t,e,n),n]}return function(a){var o=a.clone();return[C(t,e,o),o]}}var m=typeof BigInt<"u"?BigInt:void 0;function R(t,e,r){for(var n=e-t+m(1),a=m(-2147483648),o=m(4294967296),i=o,u=1;i<n;)i*=o,++u;for(var d=i-i%n;;){for(var l=m(0),f=0;f!==u;++f){var p=r.unsafeNext();l=o*l+(m(p)-a)}if(l<d){var S=l%n;return S+t}}}function Je(t,e,r){if(r!=null){var n=r.clone();return[R(t,e,n),n]}return function(a){var o=a.clone();return[R(t,e,o),o]}}var Fe=Number.MAX_SAFE_INTEGER,Ge={sign:1,data:[0,0]},$e={sign:1,data:[0,0]},H={sign:1,data:[0,0]},x=[0,0];function Xe(t,e,r,n){var a=r<=Fe?O(H,r):Ve(H,O(Ge,e),O($e,t));return a.data[1]===4294967295?(a.data[0]+=1,a.data[1]=0):a.data[1]+=1,se(x,a.data,n),x[0]*4294967296+x[1]+t}function A(t,e,r){var n=e-t;if(n<=4294967295){var a=re(n+1,r);return a+t}return Xe(t,e,n,r)}function Ze(t,e,r){if(r!=null){var n=r.clone();return[A(t,e,n),n]}return function(a){var o=a.clone();return[A(t,e,o),o]}}var Ye="module",et="6.0.4",tt="bcf9517d53f733a335e678fbba321780c0543b29";const ne=Object.freeze(Object.defineProperty({__proto__:null,__commitHash:tt,__type:Ye,__version:et,congruential32:je,generateN:Le,mersenne:Pe,skipN:Oe,uniformArrayIntDistribution:He,uniformBigIntDistribution:Je,uniformIntDistribution:Ze,unsafeGenerateN:Y,unsafeSkipN:ee,unsafeUniformArrayIntDistribution:C,unsafeUniformBigIntDistribution:R,unsafeUniformIntDistribution:A,xoroshiro128plus:Ke,xorshift128plus:ze},Symbol.toStringTag,{value:"Module"}));function Mt(t){let e=[...t];for(let r=e.length-1;r>0;r--){const n=Math.floor(Math.random()*(r+1));[e[r],e[n]]=[e[n],e[r]]}return e}function rt(t,e){let r=[],n,a=t.next(),o=0;for(;o<e&&a.done!==!0&&(n=a.value);)r.push(n),a=t.next(),o+=1;return r}function Et(t){let e=new Set;return t.forEach(r=>[...r].forEach(n=>e.add(n))),e}function Lt(t,e,r={style:"decimal",maximumFractionDigits:2}){return Number.isNaN(e)?t.notAvailable:Intl.NumberFormat(navigator.language,r).format(e)}const st=()=>Date.now()^Math.random()*4294967296,nt=()=>ne.xoroshiro128plus(st());class b{constructor(e,r,n,a,o=5,i=5){s(this,"chars");s(this,"min");s(this,"max");s(this,"id");s(this,"name");s(this,"lang");s(this,"rng");s(this,"weights");s(this,"bst");s(this,"len");if(e.length===0)throw new Error("Invalid random letter lesson: the list of characters must contain at least one element");o<=i?(this.min=o,this.max=i):(this.max=o,this.min=i),this.id=r,this.name=n,this.lang=a,this.chars=e.map(u=>u[0]),this.rng=nt(),this.weights=e.map(u=>u[1]),this.bst=le.newProportionedNormalized(e),this.len=o!==i?()=>ne.unsafeUniformIntDistribution(this.min,this.max,this.rng):()=>this.min}static getTypeId(){return _}[Symbol.iterator](){return this}next(){let e=this.len(),r="";for(let n=0;n<e;n++)r+=this.bst.search(Math.random());return{done:!1,value:r}}toJSON(){return JSON.stringify(this.storable())}storable(){return{type:_,id:this.id,name:this.name,lang:this.lang,chars:this.chars,min:this.min,max:this.max,weights:this.weights}}static async fromStorable(e,r,n=fetch){const a=e.chars.map((o,i)=>[o,e.weights[i]]);return new b(a,e.id,e.name,e.lang,e.min,e.max)}static newStorable(e,r,n,a,o=5,i=5){const u=a.map(l=>l[0]),d=a.map(l=>l[1]);return{type:_,id:e,chars:u,name:r,lang:n,min:o,max:i,weights:d}}getChild(){}getType(){return _}getName(e){return this.name}language(){return this.lang}baseLesson(){return this}batch(e){return rt(this,e)}overrides(){return{...U,random:!0,adaptive:"disabled"}}handleInput(e,r,n,a){return Z(e,r,n,a)}handleKeydown(e,r,n,a){return q(e,r,n,a)}}const at="qwerty_en-US_1",ae=[["a",1/7],["s",1/7],["d",1/7],["f",1/7],["j",1/7],["k",1/7],["l",1/7]],oe=ae.map(([t,e])=>[t,e*.5]);oe.push(["g",.25],["h",.25]);const Ot=new Map([["en-test-words",h.newStorable("en-test-words","Test Words","en","test_words.json")],["dvorak_en-US_1",h.newStorable("dvorak_en-US_1","Dvorak homerow","en","dvorak_en-US/lesson_1_homerow_basic.json")],["dvorak_en-US_2",h.newStorable("dvorak_en-US_2","Dvorak homerow + middle","en","dvorak_en-US/lesson_2_homerow_middle.json")],["dvorak_en-US_3",h.newStorable("dvorak_en-US_3","Dvorak toprow","en","dvorak_en-US/lesson_3_toprow_basic.json")],["dvorak_en-US_4",h.newStorable("dvorak_en-US_4","Dvorak toprow + middle","en","dvorak_en-US/lesson_4_toprow_middle.json")],["dvorak_en-US_5",h.newStorable("dvorak_en-US_5","Dvorak bottomrow","en","dvorak_en-US/lesson_5_bottomrow_basic.json")],["dvorak_en-US_6",h.newStorable("dvorak_en-US_6","Dvorak bottomrow + middle","en","dvorak_en-US/lesson_6_bottomrow_middle.json")],["colemak_en-US_1",h.newStorable("colemak_en-US_1","Colemak homerow","en","colemak_en-US/lesson_1_homerow_basic.json")],["colemak_en-US_2",h.newStorable("colemak_en-US_2","Colemak homerow + middle","en","colemak_en-US/lesson_2_homerow_middle.json")],["colemak_en-US_3",h.newStorable("colemak_en-US_3","Colemak toprow","en","colemak_en-US/lesson_3_toprow_basic.json")],["colemak_en-US_4",h.newStorable("colemak_en-US_4","Colemak toprow + middle","en","colemak_en-US/lesson_4_toprow_middle.json")],["colemak_en-US_5",h.newStorable("colemak_en-US_5","Colemak bottomrow","en","colemak_en-US/lesson_5_bottomrow_basic.json")],["colemak_en-US_6",h.newStorable("colemak_en-US_6","Colemak bottomrow + middle","en","colemak_en-US/lesson_6_bottomrow_middle.json")],["qwerty_en-US_1",b.newStorable("qwerty_en-US_1","Qwerty homerow","en",ae)],["qwerty_en-US_2",b.newStorable("qwerty_en-US_2","Qwerty homerow + middle","en",oe)],["qwerty_en-US_3",h.newStorable("qwerty_en-US_3","Qwerty toprow","en","qwerty_en-US/lesson_3_toprow_basic.json")],["qwerty_en-US_4",h.newStorable("qwerty_en-US_4","Qwerty toprow + middle","en","qwerty_en-US/lesson_4_toprow_middle.json")],["qwerty_en-US_5",h.newStorable("qwerty_en-US_5","Qwerty bottomrow","en","qwerty_en-US/lesson_5_bottomrow_basic.json")],["qwerty_en-US_6",h.newStorable("qwerty_en-US_6","Qwerty bottomrow + middle","en","qwerty_en-US/lesson_6_bottomrow_middle.json")]]);function ot(t){return v([t,navigator.language,j],ke,we)}function it(t){return v([t,navigator.language,j],be,_e)}function xt(t){return v([t,navigator.language,j],ye,at)}function v(t,e,r){if(t.length===0)return r;const n=e.get(t[0]);if(n!==void 0)return n;const a=t[0].lastIndexOf("-");return a===-1?v(t.slice(1),e,r):(t[0]=t[0].substring(0,a),v(t,e,r))}const ut="no_map",Ct=[{name:"none",id:"no_map"},{name:"Qwerty -> Dvorak",id:"qwerty_to_dvorak"}];class g{constructor(e){s(this,"lang","");s(this,"langName","");s(this,"tutorTitle","");s(this,"settingsTitle","");s(this,"manageSettingsTitle","");s(this,"textDirection","ltr");s(this,"loading","");s(this,"stopMsg","");s(this,"inputNotStarted","");s(this,"inputPaused","");s(this,"notStarted","");s(this,"paused","");s(this,"restartLesson","");s(this,"yes","");s(this,"no","");s(this,"on","");s(this,"off","");s(this,"delete","");s(this,"edit","");s(this,"caseSensitive","");s(this,"caseInsensitive","");s(this,"none","");s(this,"disabledLabel","");s(this,"infinite","");s(this,"accept","");s(this,"ignore","");s(this,"start","");s(this,"stop","");s(this,"pause","");s(this,"resume","");s(this,"submit","");s(this,"cancel","");s(this,"close","");s(this,"save","");s(this,"back","");s(this,"day","");s(this,"days","");s(this,"hour","");s(this,"hours","");s(this,"minute","");s(this,"minutes","");s(this,"second","");s(this,"seconds","");s(this,"notAvailable","");s(this,"enable","");s(this,"wordMode","");s(this,"charMode","");s(this,"space","");s(this,"missedSpace","");s(this,"useUserValue","");s(this,"openTtsDialog","");s(this,"ttsDialogTitle","");s(this,"ttsLanguageLabel","");s(this,"ttsVoiceLabel","");s(this,"ttsPitchLabel","");s(this,"ttsRateLabel","");s(this,"ttsVolumeLabel","");s(this,"ttsTextLabel","");s(this,"ttsMuteLabel","");s(this,"ttsPreview","");s(this,"ttsExampleText","");s(this,"ttsNotEnabled","");s(this,"openUserStatsDialog","");s(this,"openSessionStatsDialog","");s(this,"statsDialogSaveTitle","");s(this,"statsDialogSessionTitle","");s(this,"statsDialogUserTitle","");s(this,"statsDialogDuration","");s(this,"statsDialogKeystrokes","");s(this,"statsDialogWords","");s(this,"statsDialogChars","");s(this,"statsDialogUncorrectedErrors","");s(this,"statsDialogCorrectedErrors","");s(this,"statsDialogGrossWpm","");s(this,"statsDialogNetWpm","");s(this,"statsDialogAccuracy","");s(this,"resetStats","");s(this,"statsDialogTrackUserStats","");s(this,"statsResetPrompt","");s(this,"openLessonConfigDialog","");s(this,"lessonConfigDialogTitle","");s(this,"lessonConfigConfirmSubmit","");s(this,"lessonConfigClearAdaptive","");s(this,"lessonConfigClearAdaptiveConfirm","");s(this,"openConfigDialog","");s(this,"configDialogTitile","");s(this,"configSpaceOptional","");s(this,"configAdaptive","");s(this,"configCharModeOnly","");s(this,"configRandom","");s(this,"configUntil","");s(this,"configMinQueue","");s(this,"configWordBatchSize","");s(this,"configCheckMode","");s(this,"configCheckModeChars","");s(this,"configCheckModeWords","");s(this,"configAcceptBackspace","");s(this,"configLogLessonStats","");s(this,"configCaseSensitive","");s(this,"configStopHotkey","");s(this,"configPauseHotkey","");s(this,"configRemap","");s(this,"configLanguage","");s(this,"seriesNextLesson","");s(this,"seriesPrevLesson","");s(this,"seriesSelectLesson","");s(this,"incompatibleWrapper","");s(this,"incompatibleLesson","");s(this,"classStockWords","");s(this,"classUserWords","");s(this,"classRandomChars","");s(this,"classAdaptive","");s(this,"classRandomize","");s(this,"classUntil","");s(this,"actionClearData","");s(this,"actionClearDataPrompt","");s(this,"openLessonEditDialog","");s(this,"lessonDialogCustomTitle","");s(this,"lessonDialogStockTitle","");s(this,"lessonDialogNewLesson","");s(this,"lessonDialogAddLesson","");s(this,"lessonDialogEditLesson","");s(this,"lessonDialogLessonName","");s(this,"lessonDialogLessonId","");s(this,"lessonDialogWords","");s(this,"lessonDialogExistingId","");s(this,"lessonDialogConfirmDelete","");s(this,"lessonDialogStartLesson","");s(this,"lessonDialogEditLessonSettings","");s(this,"statsLogTitle","");s(this,"statsLogNoStats","");s(this,"statsLogTotal","");s(this,"statsLogAverage","");s(this,"statsLogSessions","");s(this,"statsLogBackspaces","");s(this,"statsLogWordErrors","");s(this,"durationOneSecond","");s(this,"durationOtherSecond","");s(this,"durationOneMinute","");s(this,"durationOtherMinute","");s(this,"durationOneHour","");s(this,"durationOtherHour","");s(this,"durationOneDay","");s(this,"durationOtherDay","");s(this,"durationShortOneSecond","");s(this,"durationShortOtherSecond","");s(this,"durationShortOneMinute","");s(this,"durationShortOtherMinute","");s(this,"durationShortOneHour","");s(this,"durationShortOtherHour","");s(this,"durationShortOneDay","");s(this,"durationShortOtherDay","");s(this,"resetLessonStats","");s(this,"resetLessonStatsPrompt","");for(const r in e)this.hasOwnProperty(r)&&(this[r]=e[r])}static async default(e=fetch){const r=it(navigator.language);return g.load(r,e)}static async load(e,r=fetch){const n=new Request(`${T}/data/lang/${e}.json`);return r(n).then(a=>a.json()).then(a=>new g(a))}}class N{constructor(e){for(const r in e)this[r]=e[r]}toJSON(){const e={};for(const r in this)Object.hasOwn(this,r)&&(r==="tts"?e[r]=D.serialize(this.tts):r==="remap"?e[r]=this.remap.getId():r==="lang"?e[r]=this.lang.lang:e[r]=this[r]);return e}serialize(){return JSON.stringify(this)}saveUserConfig(e){const r=this.toJSON();return de(e,J,r)}lessonOptions(e){return{random:e.random??this.random,until:e.until===void 0?this.until:e.until,wordBatchSize:e.wordBatchSize??this.wordBatchSize,minQueue:e.minQueue??this.minQueue,checkMode:e.checkMode??this.checkMode,backspace:e.backspace??this.backspace,spaceOptional:e.spaceOptional??this.spaceOptional,adaptive:e.adaptive??this.adaptive,caseSensitive:e.caseSensitive??this.caseSensitive}}mergeLessonOptions(e){return new N({user:this.user,lastLesson:this.lastLesson,checkMode:e.checkMode??this.checkMode,backspace:e.backspace??this.backspace,wordBatchSize:e.wordBatchSize??this.wordBatchSize,minQueue:e.minQueue??this.minQueue,shortcuts:this.shortcuts,logStats:this.logStats,caseSensitive:e.caseSensitive??this.caseSensitive,tts:this.tts,audioDefaults:this.audioDefaults,remap:this.remap,lang:this.lang,userStats:this.userStats,nextCustomId:this.nextCustomId,spaceOptional:e.spaceOptional??this.spaceOptional,random:e.random??this.random,until:e.until===void 0?this.until:e.until,adaptive:e.adaptive??this.adaptive})}mergeAvailable(e){let r,n={...this};for(r in U)e[r]!=="disabled"&&e[r]!=="enabled"&&(n[r]=e[r]);return n}}async function ct(t=fetch){const e=ot(navigator.language),r=new y,n=await g.default(t),a=await $.load(ut,t),o=void 0;return new N({...F,tts:o,audioDefaults:e,remap:a,lang:n,userStats:r})}async function ht(t,e=fetch){const r=t,n=await g.load(r.lang,e),a=await $.load(r.remap,e),o=D.deserialize(r.tts),i=y.deserialize(r.userStats),u={...F,...r,lang:n,remap:a,tts:o,userStats:i};return new N(u)}async function Rt(t){const e=await ce(t,J,he);return e===void 0?ct():ht(e)}function At(t,e=!1){return e?{day:{one:t.durationShortOneDay,other:t.durationShortOtherDay},hour:{one:t.durationShortOneHour,other:t.durationShortOtherHour},minute:{one:t.durationShortOneMinute,other:t.durationShortOtherMinute},second:{one:t.durationShortOneSecond,other:t.durationShortOtherSecond}}:{day:{one:t.durationOneDay,other:t.durationOtherDay},hour:{one:t.durationOneHour,other:t.durationOtherHour},minute:{one:t.durationOneMinute,other:t.durationOtherMinute},second:{one:t.durationOneSecond,other:t.durationOtherSecond}}}function Tt(t,e){switch(e){case"duration":return t.statsDialogDuration;case"keystrokes":return t.statsDialogKeystrokes;case"words":return t.statsDialogWords;case"chars":return t.statsDialogChars;case"uncorrectedErrors":return t.statsDialogUncorrectedErrors;case"correctedErrors":return t.statsDialogCorrectedErrors;case"wordErrors":return t.statsLogBackspaces;case"backspaces":return t.statsLogWordErrors}return""}function dt(t,e,r){const n=[e.day,e.hour,e.minute].find(i=>i!==0)===void 0,a=(i,u)=>u===1?t[i].one:t[i].other,o=(i,u)=>u!==0||i==="second"&&n;return Object.entries(e).filter(i=>o(...i)).map(([i,u])=>a(i,u).replace("%n",u.toString())).join(r)}function lt(t){return t<0&&(t=-t),{day:Math.floor(t/864e5),hour:Math.floor(t/36e5)%24,minute:Math.floor(t/6e4)%60,second:Math.floor(t/1e3)%60}}const jt=(t,e,r=", ")=>dt(t,lt(e),r);export{D as A,Ee as B,N as C,pe as D,fe as E,me as F,wt as G,Tt as H,kt as I,g as L,$ as R,h as S,Lt as a,_t as b,ot as c,ct as d,gt as e,jt as f,At as g,Dt as h,Mt as i,rt as j,Ct as k,Rt as l,bt as m,U as n,Ut as o,q as p,Et as q,Nt as r,Ot as s,_ as t,yt as u,b as v,k as w,xt as x,St as y,ve as z};
